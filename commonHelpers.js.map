{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45270476-0e4dc869b670f41fd1cb8efc7';\n\nexport const fetchImages = async (queryText, page = 1, per_page = 15) => {\n  const response = await axios.get('https://pixabay.com/api/?', {\n    params: {\n      key: API_KEY,\n      q: queryText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      // safesearch: false,\n      page: page,\n      per_page: per_page,\n    },\n  });\n  return response.data;\n};\n","export const markup = imagesArray =>\n  imagesArray\n    .map(image => {\n      return `  <div class=\"gallery-card\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-card-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"gallery-card-img\" />\n          <ul class=\"gallery-card-info\">\n            <li class=\"gallery-card-info-item\">\n              <p class=\"gallery-card-info-name\">Likes</p>\n              <p class=\"gallery-card-info-value\">${image.likes}</p>\n            </li>\n            <li class=\"gallery-card-info-item\">\n              <p class=\"gallery-card-info-name\">Views</p>\n              <p class=\"gallery-card-info-value\">${image.views}</p>\n            </li> \n            <li class=\"gallery-card-info-item\">\n              <p class=\"gallery-card-info-name\">Comments</p>\n              <p class=\"gallery-card-info-value\">${image.comments}</p>\n            </li>\n            <li class=\"gallery-card-info-item\">\n              <p class=\"gallery-card-info-name\">Downloads</p>\n              <p class=\"gallery-card-info-value\">${image.downloads}</p>\n            </li>\n          </ul>\n          </a>\n        </div>`;\n    })\n    .join('');\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchImages as pixabayFetchImages } from './js/pixabay-api';\nimport { markup } from './js/render-functions';\n\nconst MSG_NO_RESULTS =\n  'Sorry, there are no images matching your search query. Please try again.';\nconst MSG_END_OF_SEARCH =\n  'We are sorry, but you have reached the end of search results.';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-text');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nlet page = 1;\nconst img_per_page = 15;\nlet searhText = '';\n\nconst showGallery = searhText => {\n  btnLoadMore.classList.add('is-hidden');\n  loader.style.display = 'block';\n\n  pixabayFetchImages(searhText, page, img_per_page)\n    .then(images => {\n      if (images.hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          title: 'Error',\n          message: MSG_NO_RESULTS,\n        });\n        return;\n      }\n      const rect2 = gallery.getBoundingClientRect();\n      gallery.insertAdjacentHTML('beforeend', markup(images.hits));\n      galleryLightbox.refresh();\n\n      if (\n        images.hits.length < img_per_page ||\n        img_per_page * page >= images.totalHits\n      ) {\n        iziToast.error({\n          position: 'topRight',\n          title: 'Error',\n          message: MSG_END_OF_SEARCH,\n        });\n      } else {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n\n      if (page > 1) {\n        // // прокуртка на 2 висоти зображення як в завданні\n        // const galleryCard = document.querySelector('.gallery-card');\n        // const rect = galleryCard.getBoundingClientRect();\n        // const scrollHeight = rect.height * 2;\n        // window.scrollBy({ top: scrollHeight, behavior: 'smooth' });\n\n        // пркурутка до нових зображень\n        window.scrollBy({ top: rect2.bottom, behavior: 'smooth' });\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n};\n\nconst onSearch = event => {\n  event.preventDefault();\n  searhText = searchInput.value.trim();\n  searchInput.value = '';\n\n  if (searhText === '') {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Enter text',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  showGallery(searhText);\n};\n\nconst onLoadMore = () => {\n  page += 1;\n  showGallery(searhText);\n};\n\nsearchForm.addEventListener('submit', onSearch);\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nlet galleryLightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  // animationSlide: false,\n  animationSpeed: 150,\n  fadeSpeed: 150,\n});\n"],"names":["API_KEY","fetchImages","queryText","page","per_page","axios","markup","imagesArray","image","MSG_NO_RESULTS","MSG_END_OF_SEARCH","searchForm","searchInput","gallery","loader","btnLoadMore","img_per_page","searhText","showGallery","pixabayFetchImages","images","iziToast","rect2","galleryLightbox","error","onSearch","event","onLoadMore","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAU,qCAEHC,EAAc,MAAOC,EAAWC,EAAO,EAAGC,EAAW,MAC/C,MAAMC,EAAM,IAAI,4BAA6B,CAC5D,OAAQ,CACN,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GAEZ,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,GACe,KCjBLE,EAASC,GACpBA,EACG,IAAIC,GACI;AAAA,mBACMA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,mDAITA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,mDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,eAK7D,EACA,KAAK,EAAE,ECtBNC,EACJ,2EACIC,EACJ,gEAEIC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIZ,EAAO,EACX,MAAMa,EAAe,GACrB,IAAIC,EAAY,GAEhB,MAAMC,EAAcD,GAAa,CAC/BF,EAAY,UAAU,IAAI,WAAW,EACrCD,EAAO,MAAM,QAAU,QAEvBK,EAAmBF,EAAWd,EAAMa,CAAY,EAC7C,KAAKI,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAASZ,CACnB,CAAS,EACD,MACD,CACD,MAAMa,EAAQT,EAAQ,wBACtBA,EAAQ,mBAAmB,YAAaP,EAAOc,EAAO,IAAI,CAAC,EAC3DG,EAAgB,QAAO,EAGrBH,EAAO,KAAK,OAASJ,GACrBA,EAAeb,GAAQiB,EAAO,UAE9BC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAASX,CACnB,CAAS,EAEDK,EAAY,UAAU,OAAO,WAAW,EAGtCZ,EAAO,GAQT,OAAO,SAAS,CAAE,IAAKmB,EAAM,OAAQ,SAAU,QAAQ,CAAE,CAEjE,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbV,EAAO,MAAM,QAAU,MAC7B,CAAK,CACL,EAEMW,EAAWC,GAAS,CAKxB,GAJAA,EAAM,eAAc,EACpBT,EAAYL,EAAY,MAAM,OAC9BA,EAAY,MAAQ,GAEhBK,IAAc,GAAI,CACpBI,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,YACf,CAAK,EACD,MACD,CAEDR,EAAQ,UAAY,GACpBV,EAAO,EACPe,EAAYD,CAAS,CACvB,EAEMU,EAAa,IAAM,CACvBxB,GAAQ,EACRe,EAAYD,CAAS,CACvB,EAEAN,EAAW,iBAAiB,SAAUc,CAAQ,EAC9CV,EAAY,iBAAiB,QAASY,CAAU,EAEhD,IAAIJ,EAAkB,IAAIK,EAAe,aAAc,CACrD,SAAU,GACV,aAAc,MACd,aAAc,IAEd,eAAgB,IAChB,UAAW,GACb,CAAC"}